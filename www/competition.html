<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>LiveOL</title>

  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="stylesheet" type="text/css" href="css/ratchet.css">
  <!--<link rel="stylesheet" type="text/css" href="css/ratchet-theme-ios.min.css">-->
  <!--<link rel="stylesheet" type="text/css" href="css/ratchet-theme-android.min.css">-->

  <script src='js/jquery.js'></script>
  <script src="js/ratchet.js"></script>
  
  <!--App-->
  <link rel="stylesheet" type="text/css" href="css/style.css">
</head>
<body class="loading">
  <header class="bar bar-nav top-header">
    <div class="inner">
      <a href="index.html" class="icon icon-left-nav pull-left" data-ignore='push'></a>
      <a href="help.html" data-transition="slide-in" data-ignore='push'><span class="icon icon-info pull-right"></span></a>
      <h1 id="title" class="title"><span class="compName"></span></h1>
    </div>
  </header>
  
  <section class="content">
  <div id="loader"></div>
  <div class="breadcrumbs">
    <ul>
      <li><a href="index.html" data-ignore='push'>Alla TÃ¤vlingar</a></li>
      <li><span class="compName"></span></li>
    </ul>
  </div>

    <ul class="table-view">
      <li class="table-view-cell media">
          <div class="media-body">
            <h4 class="compName"></h4>
            <p>Organiseras av: <span class="compOrganizer"></span></p>
            <p><time class="compDate"></time></p>
          </div>
      </li>
    </ul>
    
    <header class="class-header">
      <a href="#lrunners" onclick="return false" class="modal-toggle btn pull-right latest-pass">Senaste passeringarna</a>
      <h4>Klasser:</h4>
    </header>

    <div class="card">
      <ul id="classes" class="table-view"></ul>
    </div>
  </section>

<div id="lrunners" class="modal">
  <header class="bar bar-nav">
    <a class="modal-toggle icon icon-close pull-right" href="#lrunners" onclick="return false"></a>
    <h1 class="title">Senaste passeringarna</h1>
  </header>

  <div class="content">
    <ul class="table-view" id="latestRunners">
    </ul>
    
    <div class="lrunners-update">
      <p>Automatiska uppdateringar:</p>
      <div class="toggle active-t pull-right" id="toggleLrunners">
        <div class="toggle-handle"></div>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript" src="cordova.js"></script>
<script type="text/javascript" src="js/index.js"></script>
<script type="text/javascript" src="js/app.js"></script>
<script>
  app.initialize();
  
  //Get req vars from url
  var compID = window.location.hash.substring(1);

  //Run functions
  getMeta();
  getLatestRunner();
  getClass();

  //Schedule latest runners
  var on = true;
  setInterval(function() {
      if (on) {
        getLatestRunner();
      }
  }, 15000);

  //Interval (lrunners) toggle
  $("#toggleLrunners").click(function() {
    if (!$(this).hasClass("active-t")) {
      on = !on;
      $(this).removeClass("active-t");
    } else {
      on = true;
      //Run once to check
      getLatestRunner();
    }
  });

</script>
</body>
</html>